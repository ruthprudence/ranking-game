{"ast":null,"code":"// MatchupPage.js\nimport React,{useEffect}from'react';import{useDispatch,useSelector,shallowEqual}from'react-redux';import{setCurrentPage}from'../../features/game/gameSlice';import{selectChoice,incrementVote,startMatchup,nextPair,handleChoiceSelect}from'../../features/ui/uiSlice';import{selectCurrentPair}from'../../features/matchup/matchupSelectors';import{ERRORS,PAGES}from'../../features/constants';import{MatchupView}from'./MatchupView';import{jsx as _jsx}from\"react/jsx-runtime\";const MatchupPage=()=>{const dispatch=useDispatch();const isComparisonComplete=useSelector(state=>state.ui.isComparisonComplete);const currentPair=useSelector(selectCurrentPair);const topic=useSelector(state=>state.ui.topic);const items=useSelector(state=>state.ui.items);useEffect(()=>{dispatch(startMatchup(items));},[dispatch]);useEffect(()=>{if(isComparisonComplete){dispatch(setCurrentPage(PAGES.RESULTS));}},[isComparisonComplete,dispatch]);const onButtonClick=buttonIndex=>{if(currentPair&&currentPair.length===2){const selectedItem=items[currentPair[buttonIndex]];if(selectedItem){// dispatch(incrementVote({ id: selectedItem.id }));\ndispatch(handleChoiceSelect({choiceIndex:buttonIndex,items}));}}};const onChoiceSelect=choiceIndex=>{if(currentPair&&currentPair.length===2){const selectedItem=items[currentPair[choiceIndex]];if(selectedItem){dispatch(incrementVote({id:selectedItem.id}));dispatch(handleChoiceSelect({choiceIndex,items}));}}};return/*#__PURE__*/_jsx(MatchupView,{topic:topic,handleChoiceSelect:onChoiceSelect,currentPair:currentPair,items:items,onButtonClick:onButtonClick});};export default MatchupPage;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","shallowEqual","setCurrentPage","selectChoice","incrementVote","startMatchup","nextPair","handleChoiceSelect","selectCurrentPair","ERRORS","PAGES","MatchupView","jsx","_jsx","MatchupPage","dispatch","isComparisonComplete","state","ui","currentPair","topic","items","RESULTS","onButtonClick","buttonIndex","length","selectedItem","choiceIndex","onChoiceSelect","id"],"sources":["/Users/ruth/Dropbox/Developer/apps/ps/rg/src/components/Matchup/MatchupPage.js"],"sourcesContent":["// MatchupPage.js\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\n\nimport { setCurrentPage } from '../../features/game/gameSlice';\nimport { selectChoice, incrementVote, startMatchup, nextPair, handleChoiceSelect} from '../../features/ui/uiSlice';\n\nimport { selectCurrentPair } from '../../features/matchup/matchupSelectors';\nimport { ERRORS, PAGES } from '../../features/constants';\n\nimport { MatchupView } from './MatchupView';\n\nconst MatchupPage = () => {\n  const dispatch = useDispatch();\n  const isComparisonComplete = useSelector((state) => state.ui.isComparisonComplete);\n  const currentPair = useSelector(selectCurrentPair);\n  const topic = useSelector((state) => state.ui.topic);\n  const items = useSelector((state) => state.ui.items);\n\n  useEffect(() => {\n    dispatch(startMatchup(items));\n  }, [dispatch]);\n  \n  useEffect(() => {\n    if (isComparisonComplete) {\n      dispatch(setCurrentPage(PAGES.RESULTS));\n    }\n  }, [isComparisonComplete, dispatch]);\n\n  const onButtonClick = (buttonIndex) => {\n    if (currentPair && currentPair.length === 2) {\n      const selectedItem = items[currentPair[buttonIndex]];\n\n      if (selectedItem) {\n        // dispatch(incrementVote({ id: selectedItem.id }));\n        dispatch(handleChoiceSelect({ choiceIndex: buttonIndex, items }));\n      }\n    }\n  };\n\n  const onChoiceSelect = (choiceIndex) => {\n    if (currentPair && currentPair.length === 2) {\n      const selectedItem = items[currentPair[choiceIndex]];\n    \n      if (selectedItem) {\n        dispatch(incrementVote({ id: selectedItem.id })); \n        dispatch(handleChoiceSelect({ choiceIndex, items }));\n      }\n    }\n  };\n\n  return (\n    <MatchupView \n      topic={topic}\n      handleChoiceSelect={onChoiceSelect}\n      currentPair={currentPair}\n      items={items}\n      onButtonClick={onButtonClick}\n    />\n  );\n};\n\nexport default MatchupPage;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,CAAEC,YAAY,KAAQ,aAAa,CAEpE,OAASC,cAAc,KAAQ,+BAA+B,CAC9D,OAASC,YAAY,CAAEC,aAAa,CAAEC,YAAY,CAAEC,QAAQ,CAAEC,kBAAkB,KAAO,2BAA2B,CAElH,OAASC,iBAAiB,KAAQ,yCAAyC,CAC3E,OAASC,MAAM,CAAEC,KAAK,KAAQ,0BAA0B,CAExD,OAASC,WAAW,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiB,oBAAoB,CAAGhB,WAAW,CAAEiB,KAAK,EAAKA,KAAK,CAACC,EAAE,CAACF,oBAAoB,CAAC,CAClF,KAAM,CAAAG,WAAW,CAAGnB,WAAW,CAACQ,iBAAiB,CAAC,CAClD,KAAM,CAAAY,KAAK,CAAGpB,WAAW,CAAEiB,KAAK,EAAKA,KAAK,CAACC,EAAE,CAACE,KAAK,CAAC,CACpD,KAAM,CAAAC,KAAK,CAAGrB,WAAW,CAAEiB,KAAK,EAAKA,KAAK,CAACC,EAAE,CAACG,KAAK,CAAC,CAEpDvB,SAAS,CAAC,IAAM,CACdiB,QAAQ,CAACV,YAAY,CAACgB,KAAK,CAAC,CAAC,CAC/B,CAAC,CAAE,CAACN,QAAQ,CAAC,CAAC,CAEdjB,SAAS,CAAC,IAAM,CACd,GAAIkB,oBAAoB,CAAE,CACxBD,QAAQ,CAACb,cAAc,CAACQ,KAAK,CAACY,OAAO,CAAC,CAAC,CACzC,CACF,CAAC,CAAE,CAACN,oBAAoB,CAAED,QAAQ,CAAC,CAAC,CAEpC,KAAM,CAAAQ,aAAa,CAAIC,WAAW,EAAK,CACrC,GAAIL,WAAW,EAAIA,WAAW,CAACM,MAAM,GAAK,CAAC,CAAE,CAC3C,KAAM,CAAAC,YAAY,CAAGL,KAAK,CAACF,WAAW,CAACK,WAAW,CAAC,CAAC,CAEpD,GAAIE,YAAY,CAAE,CAChB;AACAX,QAAQ,CAACR,kBAAkB,CAAC,CAAEoB,WAAW,CAAEH,WAAW,CAAEH,KAAM,CAAC,CAAC,CAAC,CACnE,CACF,CACF,CAAC,CAED,KAAM,CAAAO,cAAc,CAAID,WAAW,EAAK,CACtC,GAAIR,WAAW,EAAIA,WAAW,CAACM,MAAM,GAAK,CAAC,CAAE,CAC3C,KAAM,CAAAC,YAAY,CAAGL,KAAK,CAACF,WAAW,CAACQ,WAAW,CAAC,CAAC,CAEpD,GAAID,YAAY,CAAE,CAChBX,QAAQ,CAACX,aAAa,CAAC,CAAEyB,EAAE,CAAEH,YAAY,CAACG,EAAG,CAAC,CAAC,CAAC,CAChDd,QAAQ,CAACR,kBAAkB,CAAC,CAAEoB,WAAW,CAAEN,KAAM,CAAC,CAAC,CAAC,CACtD,CACF,CACF,CAAC,CAED,mBACER,IAAA,CAACF,WAAW,EACVS,KAAK,CAAEA,KAAM,CACbb,kBAAkB,CAAEqB,cAAe,CACnCT,WAAW,CAAEA,WAAY,CACzBE,KAAK,CAAEA,KAAM,CACbE,aAAa,CAAEA,aAAc,CAC9B,CAAC,CAEN,CAAC,CAED,cAAe,CAAAT,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}