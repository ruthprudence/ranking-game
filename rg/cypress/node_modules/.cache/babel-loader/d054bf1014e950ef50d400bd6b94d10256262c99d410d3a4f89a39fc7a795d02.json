{"ast":null,"code":"// uiSlice.js\nimport { createSlice, createAction } from '@reduxjs/toolkit';\nimport { createItemsWithVotes } from '../matchup/createItemsWithVotes';\nimport { initializeScores } from '../matchup/initializeScores';\nimport { MAXCHOICES, MINCHOICES } from '../constants';\nexport const transitionToMatchup = createAction('ui/transitionToMatchup');\nexport const uiSlice = createSlice({\n  name: 'ui',\n  initialState: {\n    topic: '',\n    rows: ['', '', ''],\n    items: [],\n    scores: {}\n  },\n  reducers: {\n    /** Splash Page */\n    submitTopic: (state, action) => {\n      const topic = action.payload;\n      if (!topic.trim()) {\n        alert('Please enter a topic.');\n        return;\n      }\n      state.topic = topic;\n    },\n    setTopic: (state, action) => {\n      state.topic = action.payload;\n    },\n    /** Input Page */\n    submitInputPage: state => {\n      state.items = createItemsWithVotes(state.rows);\n      state.scores = initializeScores(state);\n    },\n    addItem: state => {\n      state.items.push('');\n    },\n    updateItem: (state, action) => {\n      const {\n        index,\n        value\n      } = action.payload;\n      state.items[index] = value;\n    },\n    removeItem: (state, action) => {\n      state.items.splice(action.payload, 1);\n    },\n    setItems: (state, action) => {\n      state.items = action.payload;\n    },\n    addRow: state => {\n      if (state.rows.length < MAXCHOICES) {\n        state.rows.push('');\n      }\n    },\n    removeRow: (state, action) => {\n      if (state.rows.length > MINCHOICES && action.payload >= 0 && action.payload < state.rows.length) {\n        state.rows.splice(action.payload, 1);\n      }\n    },\n    updateRow: (state, action) => {\n      const {\n        index,\n        updatedValue\n      } = action.payload;\n      if (index >= 0 && index < state.rows.length) {\n        state.rows[index] = updatedValue;\n      }\n    },\n    setValue: (state, action) => {\n      state.value = action.payload;\n    },\n    selectChoice: (state, action) => {\n      const choiceName = action.payload;\n      console.log(\"Selected choice name:\", choiceName);\n      console.log(\"Current items before update:\", state.items);\n      const updatedItems = state.items.map(item => {\n        if (item.name === choiceName) {\n          console.log(`Updating votes for ${choiceName}`);\n          return {\n            ...item,\n            votes: (item.votes || 0) + 1\n          };\n        }\n        return item;\n      });\n      console.log(\"Updated items:\", updatedItems);\n      state.items = updatedItems;\n    },\n    incrementVote: (state, action) => {\n      const index = action.payload;\n      if (index >= 0 && index < state.items.length) {\n        state.items[index].votes = (state.items[index].votes || 0) + 1;\n      }\n    }\n  }\n});\nexport const selectItems = state => state.ui.items;\nexport const {\n  addItem,\n  updateItem,\n  removeItem,\n  setItems,\n  addRow,\n  removeRow,\n  updateRow,\n  setValue,\n  setTopic,\n  submitInputPage,\n  submitTopic,\n  submitTopicAndAdvance,\n  handleValidation,\n  handleTopicSubmit,\n  selectChoice,\n  incrementVote\n} = uiSlice.actions;\nexport default uiSlice.reducer;","map":{"version":3,"names":["createSlice","createAction","createItemsWithVotes","initializeScores","MAXCHOICES","MINCHOICES","transitionToMatchup","uiSlice","name","initialState","topic","rows","items","scores","reducers","submitTopic","state","action","payload","trim","alert","setTopic","submitInputPage","addItem","push","updateItem","index","value","removeItem","splice","setItems","addRow","length","removeRow","updateRow","updatedValue","setValue","selectChoice","choiceName","console","log","updatedItems","map","item","votes","incrementVote","selectItems","ui","submitTopicAndAdvance","handleValidation","handleTopicSubmit","actions","reducer"],"sources":["/Users/ruth/Dropbox/Developer/apps/ps/rg/src/features/ui/uiSlice.js"],"sourcesContent":["// uiSlice.js\nimport { createSlice, createAction} from '@reduxjs/toolkit';\nimport { createItemsWithVotes } from '../matchup/createItemsWithVotes';\nimport { initializeScores } from '../matchup/initializeScores';\nimport { MAXCHOICES, MINCHOICES } from '../constants';\n\nexport const transitionToMatchup = createAction('ui/transitionToMatchup');\n\nexport const uiSlice = createSlice({\n  name: 'ui',\n  initialState: {\n    topic: '',\n    rows: ['', '', ''],\n    items: [],\n    scores: {},\n  },\n  reducers: {\n    /** Splash Page */\n    submitTopic: (state, action) => {\n      const topic = action.payload;\n      if (!topic.trim()) {\n          alert('Please enter a topic.');\n          return;\n      }\n      state.topic = topic;\n    },\n    setTopic: (state, action) => {\n      state.topic = action.payload;\n    },\n\n    /** Input Page */\n    submitInputPage: (state) => {\n          state.items = createItemsWithVotes(state.rows);\n          state.scores = initializeScores(state);\n    },  \n    addItem: (state) => {\n          state.items.push('');\n    },\n    updateItem: (state, action) => {\n          const { index, value } = action.payload;\n          state.items[index] = value;\n    },\n    removeItem: (state, action) => {\n        state.items.splice(action.payload, 1);\n    },\n    setItems: (state, action) => {\n        state.items = action.payload;\n    },\n    addRow: (state) => {\n        if (state.rows.length < MAXCHOICES) {\n          state.rows.push('');\n        }\n    },\n    removeRow: (state, action) => {\n        if (state.rows.length > MINCHOICES && action.payload >= 0 && action.payload < state.rows.length) {\n          state.rows.splice(action.payload, 1);\n        }\n    },\n    updateRow: (state, action) => {\n        const { index, updatedValue } = action.payload;\n        if (index >= 0 && index < state.rows.length) {\n            state.rows[index] = updatedValue;\n        }\n    },\n    setValue: (state, action) => {\n        state.value = action.payload;\n    },    \n    selectChoice: (state, action) => {\n      const choiceName = action.payload;\n      console.log(\"Selected choice name:\", choiceName);\n      console.log(\"Current items before update:\", state.items);\n    \n      const updatedItems = state.items.map(item => {\n        if (item.name === choiceName) {\n          console.log(`Updating votes for ${choiceName}`);\n          return { ...item, votes: (item.votes || 0) + 1 };\n        }\n        return item;\n      });\n    \n      console.log(\"Updated items:\", updatedItems);\n      state.items = updatedItems;\n    },\n    incrementVote: (state, action) => {\n      const index = action.payload;\n      if (index >= 0 && index < state.items.length) {\n        state.items[index].votes = (state.items[index].votes || 0) + 1;\n      }\n    },\n    \n  \n  },\n});\n\nexport const selectItems = (state) => state.ui.items;\n\nexport const { addItem, updateItem, removeItem, setItems, addRow, removeRow, updateRow, setValue, setTopic, submitInputPage, submitTopic, submitTopicAndAdvance, handleValidation, handleTopicSubmit, selectChoice, incrementVote } = uiSlice.actions;\n  \n  export default uiSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}